<div class="card border-0 shadow-sm">
  <div class="card-body">
    <h5 class="card-title">Расходы по категориям</h5>

    <% if (!categoriesSummary || categoriesSummary.length === 0) { %>
      <p class="text-muted mb-0">
        За этот месяц ещё нет расходов.
      </p>
    <% } else { %>
      <p class="mb-2 text-muted">
        Общая сумма расходов:
        <strong><%= Number(totalExpensesAbs || 0).toFixed(2) %> €</strong>
      </p>

      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3">
        <% categoriesSummary.forEach(function(c) { %>
          <div class="col">
            <div
              class="h-100 d-flex flex-column rounded-3 p-3 shadow-sm"
              style="background: rgba(0,0,0,0.02); border-left: 4px solid <%= c.color %>;"
            >
              <div class="d-flex align-items-center mb-2">
                <div
                  class="rounded-circle d-flex align-items-center justify-content-center me-2"
                  style="width:32px;height:32px;background:<%= c.color %>;"
                >
                  <i class="bi <%= c.icon %> text-white"></i>
                </div>
                <div class="flex-grow-1">
                  <div class="small fw-semibold"><%= c.name %></div>
                  <div class="small text-muted">
                    <%= c.percent.toFixed(1) %>% от расходов
                  </div>
                </div>
              </div>

              <div class="mt-auto d-flex justify-content-between align-items-end">
                <div class="fw-semibold">
                  <%= c.total.toFixed(2) %> €
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>
</div>
